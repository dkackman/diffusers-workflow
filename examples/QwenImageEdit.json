{
    "id": "QwenImageEdit",
    "variables": {
        "model_name": "Qwen/Qwen-Image-Edit-2509",
        "prompt": "the dragon in the image is flying in the sky over the man giving a speech",
        "first_image": {
            "location": "https://as2.ftcdn.net/v2/jpg/05/62/00/49/1000_F_562004924_e7isCRgRekdrQY10DYrAb2M0g7lPL3lD.jpg"
        },
        "second_image": {
            "location": "https://images.wsj.net/im-628212/IM?width=1300&height=975"
        },
        "guidance_scale": 1.0
    },
    "steps": [
        {
            "name": "edit_image",
            "pipeline": {
                "transformer": {
                    "configuration": {
                        "component_type": "QwenImageTransformer2DModel"
                    },
                    "quantization_config": {
                        "configuration": {
                            "config_type": "BitsAndBytesConfig"
                        },
                        "arguments": {
                            "load_in_4bit": true,
                            "bnb_4bit_quant_type": "{nf4}",
                            "bnb_4bit_compute_dtype": "torch.bfloat16",
                            "llm_int8_skip_modules": [
                                "transformer_blocks.0.img_mod"
                            ]
                        }
                    },
                    "from_pretrained_arguments": {
                        "model_name": "variable:model_name",
                        "subfolder": "transformer",
                        "torch_dtype": "torch.bfloat16"
                    }
                },
                "text_encoder": {
                    "configuration": {
                        "component_type": "transformers.Qwen2_5_VLForConditionalGeneration"
                    },
                    "quantization_config": {
                        "configuration": {
                            "config_type": "BitsAndBytesConfig"
                        },
                        "arguments": {
                            "load_in_4bit": true,
                            "bnb_4bit_quant_type": "{nf4}",
                            "bnb_4bit_compute_dtype": "torch.bfloat16"
                        }
                    },
                    "from_pretrained_arguments": {
                        "model_name": "variable:model_name",
                        "subfolder": "text_encoder",
                        "torch_dtype": "torch.bfloat16"
                    }
                },
                "configuration": {
                    "component_type": "QwenImageEditPlusPipeline",
                    "offload": "model"
                },
                "from_pretrained_arguments": {
                    "model_name": "variable:model_name",
                    "torch_dtype": "torch.bfloat16"
                },
                "loras": [
                    {
                        "model_name": "lightx2v/Qwen-Image-Lightning",
                        "weight_name": "Qwen-Image-Lightning-8steps-V1.1.safetensors"
                    }
                ],
                "arguments": {
                    "prompt": "variable:prompt",
                    "num_inference_steps": 8,
                    "image": [
                        "variable:first_image",
                        "variable:second_image"
                    ],
                    "true_cfg_scale": 4.0,
                    "guidance_scale": "variable:guidance_scale"
                }
            },
            "result": {
                "content_type": "image/png"
            }
        }
    ]
}